<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('common/head'); %>
  <title><%= title %></title>
</head>
<body>
  <%- include('common/header'); %>
  <div class="container">
    <div class="row">
      <form class="form-horizontal" action="/admin/movie" method="POST">
      <!-- 豆瓣的文本域 -->
        <div class="form-group">
          <label for="douban" class="col-sm-2 control-lable">豆瓣电影id</label>
          <div class="col-sm-10">
            <input id="douban" class="form-control" type="text">
          </div>
        </div>

        <% if (movie._id) { -%>
          <!-- 添加一个隐藏的表单域,来存储更新数据的id -->
          <input type="hidden" name="movie[_id]" value="<%=movie._id%>">
        <% } -%>
        <div class="form-group">
          <label for="inputcategory" class="col-sm-2 control-lable">新增分类</label>
          <!-- 添加的分类没有的话，直接存储为一个新的分类 -->
          <div class="col-sm-10">
            <input id="inputcategory" class="form-control" type="text" name="movie[categoryName]" value="<%= movie.categoryName || '' %>">
          </div>
        </div>

        <div class="form-group">
          <label for="inputcategory" class="col-sm-2 control-lable">选择分类</label>
          <div class="col-sm-10">
            <% if (movie._id) { -%>
              <select name="movie[category]" class="form-control">
                <% for (var i = 0; i < categories.length; i++) { -%>
                   <option value="<%= categories[i]._id%>" selected="<%= categories[i]._id.toString() == movie.category.toString() %>"><%= categories[i].name %></option>
                <% } -%>
                <!-- 这个留空代表,用户没有选择已经定义好的分类 -->
                <option value=""></option>
              </select>
              <!-- 选中分类的id等于这一步更新电影的category -->
            <% } else { -%>
              <select name="movie[category]" class="form-control">
                <!-- 这个留空代表,用户没有选择已经定义好的分类 -->
                <option value=""></option>
                <% for (var i = 0; i < categories.length; i++) { -%>
                   <option value="<%= categories[i]._id%>"><%= categories[i].name %></option>
                <% } -%>
                
              </select>
            <% } -%>
          </div>
        </div>

        <div class="form-group">
          <label for="inputtitle" class="col-sm-2 control-lable">电影名字</label>
          <div class="col-sm-10">
            <input id="inputtitle" class="form-control" type="text" name="movie[title]" value="<%=movie.title || '' %>">
          </div>
        </div>
        
        <div class="form-group">
          <lable for="inputdoctor" class="col-sm-2 control-lable">电影导演</lable>
          <div class="col-sm-10">
            <input id="inputdoctor" class="form-control" type="text" name="movie[doctor]" value="<%=movie.doctor || '' %>">
          </div>
        </div>

        <div class="form-group">
          <label for="inputcountry" class="col-sm-2 control-lable">国家</label>
          <div class="col-sm-10">
             <input id="inputcountry" class="form-control" type="text" name="movie[country]" value="<%=movie.country || '' %>">
          </div>
        </div>

        <div class="form-group">
          <label for="inputlanguage" class="col-sm-2 control-lable">语种</label>
          <div class="col-sm-10">
             <input id="inputlanguage" class="form-control" type="text" name="movie[language]" value="<%=movie.language || '' %>">
          </div>
        </div>

        <div class="form-group">
          <label for="inputposter" class="col-sm-2 control-lable">海报地址</label>
          <div class="col-sm-10">
            <input id="inputposter" class="form-control" type="text" name="movie[poster]" value="<%=movie.poster || '' %>">
          </div>
        </div>

        <div class="form-group">
          <label for="inputflash" class="col-sm-2 control-lable">片源地址</label>
          <div class="col-sm-10">
             <input id="inputflash" class="form-control" type="text" name="movie[flash]" value="<%=movie.flash || '' %>">
          </div> 
        </div>

        <div class="form-group">
          <label for="inputyear" class="col-sm-2 control-lable">上映年代</label>
          <div class="col-sm-10">
            <input id="inputyear" class="form-control" type="text" name="movie[year]" value="<%=movie.year || '' %>">
          </div>
        </div>

        <div class="form-group">
          <label for="inputsummary" class="col-sm-2 control-lable">电影简介</label>
          <div class="col-sm-10">
            <textarea id="inputsummary" class="col-sm-10 form-control" type="text" name="movie[summary]"><%=movie.summary || ''%>
            </textarea>
          </div>     
        </div>

        <div class="form-group">
          <div class="col-sm-offset-2 col-sm-10">
            <button class="btn btn-default" type="submit">录入</button>
          </div>
        </div>

      </form>
    </div>
  </div>
  <script src="/js/admin.js"></script>
</body>
</html>